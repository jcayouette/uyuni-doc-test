<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SUSE Manager Command Line Tools :: Uyuni Documentation (Prototype)</title>
    <meta name="generator" content="Antora 1.0.3">
    <link rel="stylesheet" href="../../_/css/site.css">
    <link rel="stylesheet" href="../../_/css/site-extra.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css">
    <!-- fetched from https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css -->
    <link rel="icon" href="../../_/img/favicon.ico" type="image/x-icon">
  </head>
  <body class="article">
<header class="header" role="banner">
  <nav class="navbar">
    <div class="navbar-brand">
      <div class="navbar-item">
        <a href="https://jcayouette.github.io/personal-blog">Belief and Reason</a>
        <span class="separator">//</span>
        <a href="../..">Library</a>
      </div>
      <div class="navbar-item">
        <input id="search-input" type="text" placeholder="Search docs">
      </div>
      <button class="navbar-burger" data-target="topbar-nav">
        <span></span>
        <span></span>
        <span></span>
      </button>
    </div>
    <div id="topbar-nav" class="navbar-menu">
      <div class="navbar-end">
        <div class="navbar-item has-dropdown is-hoverable">
          <div class="navbar-link">Projects</div>
          <div class="navbar-dropdown">
            <div class="navbar-item"><strong>Resources</strong></div>
            <a class="navbar-item" href="https://github.com/jcayouette/personal-blog">Repository</a>
            <a class="navbar-item" href="https://github.com/jcayouette/personal-blog/issues">Issue Tracker</a>
<!--
            <hr class="navbar-divider">
            <div class="navbar-item"><strong>Custom UI (coming soon!)</strong></div>
            <a class="navbar-item" href="https://gitlab.com/antora/antora-ui-default">Repository</a>
            <a class="navbar-item" href="https://gitlab.com/antora/antora-ui-default/issues">Issue Tracker</a>
            <hr class="navbar-divider">
          -->
            <a class="navbar-item" href="https://github.com/jcayouette/blob/master/contributing.adoc">Contributing</a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <div class="navbar-link">Community</div>
          <div class="navbar-dropdown is-right">
            <a class="navbar-item" href="https://discord.gg/vmrAYE3">Discord Chat</a>
          </div>
        </div>
        <a class="navbar-item" href="https://twitter.com/BaR-project">
          <span class="icon">
            <svg aria-hidden="true" data-icon="twitter" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
              <path fill="#57aaee" d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253z"></path>
            </svg>
          </span>
        </a>
      </div>
    </div>
  </nav>
</header>
<div class="main-wrapper">
<div class="navigation-container" data-component="uyuni" data-version="3.2">
  <aside class="navigation">
    <div class="panels">
<div class="navigation-menu is-active" data-panel="menu">
  <nav class="nav-menu">
    <h3 class="title"><a href="MAIN-manager.html">Uyuni</a></h3>
<ul class="nav-list">
  <li class="nav-item" data-depth="0">
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="book_mgr_getting_started.html">Getting Started</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="quickstart3_chap_install_overview.html">Overview and Requirements</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#quickstart.sect.introduction">Introduction</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#quickstart.sect.prereq">Prerequisites for Installation</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#quickstart.sect.prereq.scc">SUSE SCC Credentials</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#quickstart.sect.prereq.installmedia">Get Uyuni</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#quickstart.sect.prereq.hardware">Hardware Requirements</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#quickstart.sect.prereq.network">Network Requirements</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#quickstart.sect.prereq.clientos">Supported Client Systems</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <button class="nav-toggle"></button>
    <a class="nav-link" href="quickstart3_chap_suma_installation_jeos.html">Installation via JeOS</a>
<ul class="nav-list">
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#quickstart.sect.kvm.settings">Configuring KVM</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#jeos.kvm.settings">JeOS KVM Settings</a>
  </li>
  <li class="nav-item" data-depth="3">
    <a class="nav-link" href="#jeos.susemgr.prep">Preparing JeOS for Uyuni</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="quickstart3_chap_suma_installation_sles.html">Installation via SLES</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="quickstart3_chap_suma_setup_with_yast.html">Setup and Configuration</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="quickstart3_chap_suma_keys_and_first_client.html">Connecting Clients</a>
  </li>
  <li class="nav-item" data-depth="2">
    <a class="nav-link" href="quickstart3_chap_suma_salt_gs.html">Introduction to Salt</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="book_mgr_best_practices.html">Best Practices</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="book_suma_reference_manual.html">WebUI Reference</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link" href="book_suma_advanced_topics.html">Advanced Topics</a>
  </li>
</ul>
  </li>
</ul>
  </nav>
</div>
<div class="navigation-explore" data-panel="explore">
  <div class="context">
    <span class="title">Uyuni</span>
    <span class="version">3.2</span>
  </div>
  <ul class="components">
    <li class="component is-current">
      <span class="title">Uyuni</span>
      <ul class="versions">
        <li class="version is-latest">
          <a href="../dev/MAIN-manager.html">dev</a>
        </li>
        <li class="version is-current">
          <a href="MAIN-manager.html">3.2</a>
        </li>
      </ul>
    </li>
  </ul>
</div>
    </div>
  </aside>
</div>
  <main class="main">
<div class="toolbar" role="navigation">
  <button class="navigation-toggle"></button>
  <a href="../dev/MAIN-manager.html" class="home-link"></a>
<nav class="crumbs" aria-label="breadcrumbs">
  <ul>
    <li class="crumb"><a href="MAIN-manager.html">Uyuni</a></li>
    <li class="crumb"><a href="command-line-tools.html">SUSE Manager Command Line Tools</a></li>
  </ul>
</nav>
<div class="page-versions">
  <button class="versions-menu-toggle" title="Show other versions of page">3.2</button>
  <div class="versions-menu">
    <a class="version" href="../dev/command-line-tools.html">dev</a>
    <a class="version is-current" href="command-line-tools.html">3.2</a>
  </div>
</div>
  <div class="edit-this-page"><a href="https://github.com/jcayouette/uyuni-doc-test/edit/maintenance/3.2/docs/modules/ROOT/pages/command-line-tools.adoc">Edit this Page</a></div>
</div>
<article class="doc">
<h1>SUSE Manager Command Line Tools</h1>
<div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#_installing_command_line_tool_packages">Installing Command Line Tool Packages</a></li>
<li><a href="#mgr.actions.control">Actions Control  (mgr-actions-control)</a>
<ul class="sectlevel2">
<li><a href="#_general_command_line_options">General command line options</a></li>
</ul>
</li>
<li><a href="#mgrcfg.client.tool">Configuration Client  (mgrcfg-client)</a>
<ul class="sectlevel2">
<li><a href="#_listing_configuration_files">Listing Configuration Files</a></li>
<li><a href="#getting.a.config.file">Downloading a Config File</a></li>
<li><a href="#viewing.config.channels">Viewing Config Channels</a></li>
<li><a href="#diff.between.config.files">Differentiating between Config Files</a></li>
<li><a href="#verify.config.files">Verifying Config Files</a></li>
</ul>
</li>
<li><a href="#the.configuration.manager">Configuration Manager (mgrcfg-manager)</a>
<ul class="sectlevel2">
<li><a href="#creating.a.config.channel">Creating a Config Channel</a></li>
<li><a href="#adding.files.to.a.config.channel">Adding Files to a Config Channel</a></li>
<li><a href="#diff.between.latest.config.files">Differentiating between Latest Config Files</a></li>
<li><a href="#diff.between.various.versions">Differentiating between Various Versions</a></li>
<li><a href="#downloading.all.files.in.a.channel">Downloading All Files in a Channel</a></li>
<li><a href="#getting.the.contents.of.a.file">Getting the Contents of a File</a></li>
<li><a href="#listing.all.files.in.a.channel">Listing All Files in a Channel</a></li>
<li><a href="#listing.all.config.channels">Listing All Config Channels</a></li>
<li><a href="#removing.a.file.from.a.channel">Removing a File from a Channel</a></li>
<li><a href="#deleting.a.config.channel">Deleting a Config Channel</a></li>
<li><a href="#determine.the.number.of.file.revisions">Determining the Number of File Revisions</a></li>
<li><a href="#update.a.file.in.a.channel">Updating a File in a Channel</a></li>
<li><a href="#uploading.multiple.files.at.once">Uploading Multiple Files at Once</a></li>
</ul>
</li>
<li><a href="#syncing.suse.mgr.repositories.scc">Syncing SUSE Manager Repositories from SCC (mgr-sync)</a></li>
<li><a href="#configure.suse.manager.database.smdba">Configuring SUSE Manager&#8217;s Database (smdba)</a>
<ul class="sectlevel2">
<li><a href="#smdba.control.options">Control Options</a></li>
<li><a href="#starting.and.stopping.the.database">Starting and Stopping the Database</a></li>
</ul>
</li>
<li><a href="#at.clitools.createbootstraprepo">Creating a Bootstrap Repository (mgr-create-bootstrap-repo)</a></li>
</ul>
</div>
<div class="sect1">
<h2 id="_installing_command_line_tool_packages"><a class="anchor" href="#_installing_command_line_tool_packages"></a><a class="link" href="#_installing_command_line_tool_packages">Installing Command Line Tool Packages</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>In addition to the SUSE Manager Web interface, SUSE Manager offers two command line tools for managing (Traditional) system configuration files :</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The Configuration Client (<strong>mgrcfg-client</strong>)</p>
</li>
<li>
<p>The Configuration Manager (<strong>mgrcfg-manager</strong>)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You can use the <strong>mgrcfg-actions</strong> tool to <em>enable</em> and <em>disable</em> configuration management on client systems.</p>
</div>
<div class="paragraph">
<p>To work with these tools install them from the SUSE Manager Tools child channel as root.</p>
</div>
<div class="listingblock">
<div class="content">
<pre>zypper in rhncfg-manager</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre>zypper in rhncfg-actions</pre>
</div>
</div>
<div class="paragraph">
<p>Install the following package on client systems:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>zypper in rhncfg-client</pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title=":bulb:"></i>
</td>
<td class="content">
<div class="title">Configuration File Backups</div>
<div class="paragraph">
<p>When a configuration file is deployed via SUSE Manager, a backup of the previous file including its full path is stored in the <code class="path">/var/lib/rhncfg/backups/</code>.
The backup retains its filename but has a <em>.rhn-cfg-backup</em> extension appended.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="mgr.actions.control"><a class="anchor" href="#mgr.actions.control"></a><a class="link" href="#mgr.actions.control">Actions Control  (mgr-actions-control)</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Actions Control (<strong>mgr-actions-control</strong>) application is used to enable and disable configuration management on a system.
Client systems cannot be managed in this fashion by default.
This tool allows SUSE Manager administrators to enable or disable specific modes of allowable actions such as:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Deploying a configuration file on the system</p>
</li>
<li>
<p>Uploading a file from the system</p>
</li>
<li>
<p>Using the diff command to find out what is currently managed on a system with what is available</p>
</li>
<li>
<p>Running remote commands</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>These various modes are enabled/disabled by placing/removing files and directories in the <code class="path">/etc/sysconfig/rhn/allowed-actions/</code> directory.
Due to the default permissions of the <code class="path">/etc/sysconfig/rhn/</code> directory, Actions Control has to be run by someone with root access.</p>
</div>
<div class="sect2">
<h3 id="_general_command_line_options"><a class="anchor" href="#_general_command_line_options"></a><a class="link" href="#_general_command_line_options">General command line options</a></h3>
<div class="paragraph">
<p>There is a manpage available, as for most command line tools.
First, decide which scheduled actions should be enabled for use by system administrators.
The following options enable the various scheduled action modes:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">--enable-deploy</dt>
<dd>
<p>Allow mgrcfg-client to deploy files.</p>
</dd>
<dt class="hdlist1">--enable-diff</dt>
<dd>
<p>Allow mgrcfg-client to diff files.</p>
</dd>
<dt class="hdlist1">--enable-upload</dt>
<dd>
<p>Allow mgrcfg-client to upload files.</p>
</dd>
<dt class="hdlist1">--enable-mtime-upload</dt>
<dd>
<p>Allow mgrcfg-client to upload mtime (file modification time).</p>
</dd>
<dt class="hdlist1">--enable-all</dt>
<dd>
<p>Allow mgrcfg-client to do everything.</p>
</dd>
<dt class="hdlist1">--enable-run</dt>
<dd>
<p>Enable running scripts.</p>
</dd>
<dt class="hdlist1">--disable-deploy</dt>
<dd>
<p>Disable deployment.</p>
</dd>
<dt class="hdlist1">--disable-diff</dt>
<dd>
<p>Prohibit diff use.</p>
</dd>
<dt class="hdlist1">--disable-upload</dt>
<dd>
<p>No file uploads allowed.</p>
</dd>
<dt class="hdlist1">--disable-mtime-upload</dt>
<dd>
<p>Disable mtime upload.</p>
</dd>
<dt class="hdlist1">--disable-all</dt>
<dd>
<p>Disable all options.</p>
</dd>
<dt class="hdlist1">--disable-run</dt>
<dd>
<p>No scripts allowed to run.</p>
</dd>
<dt class="hdlist1">--report</dt>
<dd>
<p>Report whether modes are enabled or disabled.</p>
</dd>
<dt class="hdlist1">-f, --force</dt>
<dd>
<p>Force the operation without asking first.</p>
</dd>
<dt class="hdlist1">-h, --help</dt>
<dd>
<p>Show help message and exit.</p>
</dd>
</dl>
</div>
<div class="paragraph">
<p>Once a mode is set, your system is ready for configuration management through SUSE Manager.
A common option is <code class="command">mgr-actions-control --enable-all</code>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="mgrcfg.client.tool"><a class="anchor" href="#mgrcfg.client.tool"></a><a class="link" href="#mgrcfg.client.tool">Configuration Client  (mgrcfg-client)</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Configuration Client (mgrcfg-client) is installed on and run from an individual client system to gain knowledge about how SUSE Manager deploys configuration files to the client.</p>
</div>
<div class="paragraph">
<p>The Configuration Client offers these primary modes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>list</p>
</li>
<li>
<p>get</p>
</li>
<li>
<p>channels</p>
</li>
<li>
<p>diff</p>
</li>
<li>
<p>verify</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="_listing_configuration_files"><a class="anchor" href="#_listing_configuration_files"></a><a class="link" href="#_listing_configuration_files">Listing Configuration Files</a></h3>
<div class="paragraph">
<p>To list the configuration files for the machine and the labels of the config channels containing them, issue the command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>mgrcfg-client list</pre>
</div>
</div>
<div class="paragraph">
<p>The output resembles the following list ("DoFoS" is a shortcut for "D or F or S", which means "Directory", "File", or "Something else"(?)):</p>
</div>
<div class="listingblock">
<div class="content">
<pre>DoFoS   Config Channel      File
F      config-channel-17   /etc/example-config.txt
F      config-channel-17   /var/spool/aalib.rpm
F      config-channel-14   /etc/rhn/rhn.conf</pre>
</div>
</div>
<div class="paragraph">
<p>These configuration files apply to your system.
However, there may be duplicate files present in other channels.
For example, issue the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>mgrcfg-manager list config-channel-14</pre>
</div>
</div>
<div class="paragraph">
<p>and observe the following output:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Files in config channel 'config-channel-14'
/etc/example-config.txt /etc/rhn/rhn.conf</pre>
</div>
</div>
<div class="paragraph">
<p>You may wonder why the second version of <code class="path">/etc/example-config.txt</code> in <strong>config-channel-14</strong> does not apply to the client system.
The rank of the <code class="path">/etc/example-config.txt</code> file in <strong>config-channel-17</strong> was higher than that of the same file in <strong>config-channel-14</strong>.
As a result, the version of the configuration file in config-channel-14 is not deployed for this system, therefore mgrcfg-client command does not list the file.</p>
</div>
</div>
<div class="sect2">
<h3 id="getting.a.config.file"><a class="anchor" href="#getting.a.config.file"></a><a class="link" href="#getting.a.config.file">Downloading a Config File</a></h3>
<div class="paragraph">
<p>To download the most relevant configuration file for the machine, issue the command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>mgrcfg-client get /etc/example-config.txt</pre>
</div>
</div>
<div class="paragraph">
<p>You should see output resembling:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Deploying /etc/example-config.txt</pre>
</div>
</div>
<div class="paragraph">
<p>View the contents of the file with less or another pager.
Note that the file is selected as the most relevant based on the rank of the config channel containing it.
This is accomplished within the Configuration tab of the System Details page.</p>
</div>
<div class="paragraph">
<p>Refer to Section "System Details" (Chapter 4, Systems, User Guide) for instructions.</p>
</div>
</div>
<div class="sect2">
<h3 id="viewing.config.channels"><a class="anchor" href="#viewing.config.channels"></a><a class="link" href="#viewing.config.channels">Viewing Config Channels</a></h3>
<div class="paragraph">
<p>To view the labels and names of the config channels that apply to the system, issue the command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>mgrcfg-client channels</pre>
</div>
</div>
<div class="paragraph">
<p>You should see output resembling:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Config channels:
Label                   Name
-----                   ----
config-channel-17       config chan 2
config-channel-14       config chan 1</pre>
</div>
</div>
<div class="paragraph">
<p>The list of options available for <code class="command">mgrcfg-client get</code>:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">--topdir=TOPDIR</dt>
<dd>
<p>Make all file operations relative to this string.</p>
</dd>
<dt class="hdlist1">--exclude=EXCLUDE</dt>
<dd>
<p>Exclude a file from being deployed with get.
May be used multiple times.</p>
</dd>
<dt class="hdlist1">-h, --help</dt>
<dd>
<p>Show help message and exit.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="diff.between.config.files"><a class="anchor" href="#diff.between.config.files"></a><a class="link" href="#diff.between.config.files">Differentiating between Config Files</a></h3>
<div class="paragraph">
<p>To view the differences between the config files deployed on the system and those stored by SUSE Manager, issue the command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>mgrcfg-client diff</pre>
</div>
</div>
<div class="paragraph">
<p>The output resembles the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>rhncfg-client diff
--- /etc/test
+++ /etc/test 2013-08-28 00:14:49.405152824 +1000
@@ -1 +1,2 @@
This is the first line
+This is the second line added</pre>
</div>
</div>
<div class="paragraph">
<p>In addition, you can include the <code class="option">--topdir</code> option to compare config files with those located in an arbitrary (and unused) location on the client system, like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># mgrcfg-client diff --topdir /home/test/blah/
/usr/bin/diff: /home/test/blah/etc/example-config.txt: No such file or directory
/usr/bin/diff: /home/test/blah/var/spool/aalib.rpm: No such file or directory</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="verify.config.files"><a class="anchor" href="#verify.config.files"></a><a class="link" href="#verify.config.files">Verifying Config Files</a></h3>
<div class="paragraph">
<p>To quickly determine if client configuration files are different from those associated with it via SUSE Manager, issue the command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>mgrcfg-client verify</pre>
</div>
</div>
<div class="paragraph">
<p>The output resembles the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>modified /etc/example-config.txt /var/spool/aalib.rpm</pre>
</div>
</div>
<div class="paragraph">
<p>The file <code class="filename">example-config.txt</code> is locally modified, while <code class="package">aalib.rpm</code> is not.</p>
</div>
<div class="paragraph">
<p>The list of the options available for mgrcfg-client verify:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">-v, --verbose</dt>
<dd>
<p>Increase the amount of output detail.
Display differences in the mode, owner, and group permissions for the specified config file.</p>
</dd>
<dt class="hdlist1">-o, --only</dt>
<dd>
<p>Only show differing files.</p>
</dd>
<dt class="hdlist1">-h, --help</dt>
<dd>
<p>Show help message and exit.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="the.configuration.manager"><a class="anchor" href="#the.configuration.manager"></a><a class="link" href="#the.configuration.manager">Configuration Manager (mgrcfg-manager)</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Configuration Manager (<strong>mgrcfg-manager</strong>) is designed to maintain SUSE Manager&#8217;s central repository of config files and channels, not those located on client systems.
This tool offers a command line alternative to the configuration management features in the SUSE Manager Web interface.
Additionally, some or all of the related maintenance tasks can be scripted.</p>
</div>
<div class="paragraph">
<p>To use the command line interface, configuration administrators require a SUSE Manager account (username and password) with the appropriate permission set.
The username may be specified in <code class="path">/etc/sysconfig/rhn/rhncfg-manager.conf</code> or in the <code class="option">[rhncfg-manager]</code> section of <code class="path">~/.rhncfgrc</code>.</p>
</div>
<div class="paragraph">
<p>When the Configuration Manager is run as <strong>root</strong>, it attempts to pull in needed configuration values from the Red Hat Update Agent.
When run as a user other than root, you may have to change the <code class="path">~/.rhncfgrc</code> configuration file.
The session file is cached in <code class="path">~/.rhncfg-manager-session</code> to avoid having to log in for every command.</p>
</div>
<div class="paragraph">
<p>The default timeout for the Configuration Manager is 30 minutes.
To adjust this, add the <code class="option">server.session_lifetime</code> option and a new value to the <code class="path">/etc/rhn/rhn.conf</code> file on the server running the manager.
For example set the time out to <strong>120 minutes</strong>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>server.session_lifetime = 120</pre>
</div>
</div>
<div class="paragraph">
<p>The Configuration Manager offers the following primary <strong>modes</strong>:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>add</p>
</li>
<li>
<p>create-channel</p>
</li>
<li>
<p>diff</p>
</li>
<li>
<p>diff-revisions</p>
</li>
<li>
<p>download-channel</p>
</li>
<li>
<p>get</p>
</li>
<li>
<p>list</p>
</li>
<li>
<p>list-channels</p>
</li>
<li>
<p>remove</p>
</li>
<li>
<p>remove-channel</p>
</li>
<li>
<p>revisions</p>
</li>
<li>
<p>update</p>
</li>
<li>
<p>upload-channel</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Each mode offers its own set of options, which can be displayed by issuing the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>mgrcfg-manager mode --help</pre>
</div>
</div>
<div class="paragraph">
<p>Replace mode with the name of the mode whose options you want to see:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>mgrcfg-manager diff-revisions --help</pre>
</div>
</div>
<div class="sect2">
<h3 id="creating.a.config.channel"><a class="anchor" href="#creating.a.config.channel"></a><a class="link" href="#creating.a.config.channel">Creating a Config Channel</a></h3>
<div class="paragraph">
<p>To create a config channel for your organization, issue the command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>mgrcfg-manager create-channel channel-label</pre>
</div>
</div>
<div class="paragraph">
<p>If prompted for your SUSE Manager username and password, provide them.
Once you have created a config channel, use the remaining modes listed above to populate and maintain that channel.</p>
</div>
</div>
<div class="sect2">
<h3 id="adding.files.to.a.config.channel"><a class="anchor" href="#adding.files.to.a.config.channel"></a><a class="link" href="#adding.files.to.a.config.channel">Adding Files to a Config Channel</a></h3>
<div class="paragraph">
<p>To add a file to a config channel, specify the channel label and the local file to be uploaded:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>mgrcfg-manager add --channel=channel-label /path/to/file</pre>
</div>
</div>
<div class="paragraph">
<p>In addition to the required channel label and the path to the file, you can use the available options for modifying the file during its addition.
For instance, you can alter the path and file name by including the <code class="option">--dest-file</code> option in the command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>mgrcfg-manager add --channel=channel-label \
  --dest-file=/new/path/to/file.txt/path/to/file</pre>
</div>
</div>
<div class="paragraph">
<p>The output resembles the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Pushing to channel example-channel
Local file &gt;/path/to/file -&gt; remote file /new/path/to/file.txt</pre>
</div>
</div>
<div class="paragraph">
<p>The list of options available for mgrcfg-manager add:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">-c CHANNEL --channel=CHANNEL</dt>
<dd>
<p>Upload files in this config channel.</p>
</dd>
<dt class="hdlist1">-d DEST_FILE --dest-file=DEST_FILE</dt>
<dd>
<p>Upload the file as this path.</p>
</dd>
<dt class="hdlist1">--delim-start=DELIM_START</dt>
<dd>
<p>Start delimiter for variable interpolation.</p>
</dd>
<dt class="hdlist1">--delim-end=DELIM_END</dt>
<dd>
<p>End delimiter for variable interpolation.</p>
</dd>
<dt class="hdlist1">-i, --ignore-missing</dt>
<dd>
<p>Ignore missing local files.</p>
</dd>
<dt class="hdlist1">-h, --help</dt>
<dd>
<p>Show help message and exit.</p>
</dd>
</dl>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title=":bulb:"></i>
</td>
<td class="content">
<div class="title">Max File size</div>
<div class="paragraph">
<p>By default, the maximum file size for configuration files is 128KB.
If you need to change that value, find or create the following line in the <code class="path">/etc/rhn/rhn.conf</code> file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>web.maximum_config_file_size=128</pre>
</div>
</div>
<div class="paragraph">
<p>Change the value from 128 to whatever limit you need in kilobytes.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="diff.between.latest.config.files"><a class="anchor" href="#diff.between.latest.config.files"></a><a class="link" href="#diff.between.latest.config.files">Differentiating between Latest Config Files</a></h3>
<div class="paragraph">
<p>To view the differences between the config files on disk and the latest revisions in a channel, issue the command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>mgrcfg-manager diff --channel=channel-label --dest-file=/path/to/file.txt \
/local/path/to/file</pre>
</div>
</div>
<div class="paragraph">
<p>You should see output resembling:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>--- /tmp/dest_path/example-config.txt config_channel: example-channel revision: 1
+++ /home/test/blah/hello_world.txt 2003-12-14 19:08:59.000000000 -0500
@@ -1 +1 @@
-foo
+hello, world</pre>
</div>
</div>
<div class="paragraph">
<p>The list of options available for <code class="command">mgrcfg-manager diff</code>:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">-c CHANNEL, --channel=CHANNEL</dt>
<dd>
<p>Get file(s) from this config channel.</p>
</dd>
<dt class="hdlist1">-r REVISION, --revision=REVISION</dt>
<dd>
<p>Use this revision.</p>
</dd>
<dt class="hdlist1">-d DEST_FILE, --dest-file=DEST_FILE</dt>
<dd>
<p>Upload the file at this path.</p>
</dd>
<dt class="hdlist1">-t TOPDIR, --topdir=TOPDIR</dt>
<dd>
<p>Make all files relative to this string.</p>
</dd>
<dt class="hdlist1">-h, --help</dt>
<dd>
<p>Show help message and exit.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="diff.between.various.versions"><a class="anchor" href="#diff.between.various.versions"></a><a class="link" href="#diff.between.various.versions">Differentiating between Various Versions</a></h3>
<div class="paragraph">
<p>To compare different versions of a file across channels and revisions, use the <strong>-r</strong> flag to indicate which revision of the file should be compared and the <strong>-n</strong> flag to identify the two channels to be checked.
Specify only one file name here since you are comparing the file against another version of itself.
For example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>mgrcfg-manager diff-revisions -n=channel-label1 -r=1 \
  -n=channel-label2 -r=1 \
  /path/to/file.txt</pre>
</div>
</div>
<div class="paragraph">
<p>The output resembles the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>--- /tmp/dest_path/example-config.txt 2004-01-13 14:36:41 \
config channel: example-channel2 revision: 1
--- /tmp/dest_path/example-config.txt 2004-01-13 14:42:42 \
config channel: example-channel3 revision: 1
@@ -1 +1,20 @@
-foo
+blah
+-----BEGIN PGP SIGNATURE-----
+Version: GnuPG v1.0.6 (GNU/Linux)
+Comment: For info see http://www.gnupg.org
+
+iD8DBQA9ZY6vse4XmfJPGwgRAsHcAJ9ud9dabUcdscdcqB8AZP7e0Fua0NmKsdhQCeOWHX
+VsDTfen2NWdwwPaTM+S+Cow=
+=Ltp2
+-----END PGP SIGNATURE-----</pre>
</div>
</div>
<div class="paragraph">
<p>The list of options available for <code class="command">mgrcfg-manager diff-revisions</code>:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">-c CHANNEL, --channel=CHANNEL</dt>
<dd>
<p>Use this config channel.</p>
</dd>
<dt class="hdlist1">-r REVISION, --revision=REVISION</dt>
<dd>
<p>Use this revision.</p>
</dd>
<dt class="hdlist1">-h, --help</dt>
<dd>
<p>Show help message and exit.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="downloading.all.files.in.a.channel"><a class="anchor" href="#downloading.all.files.in.a.channel"></a><a class="link" href="#downloading.all.files.in.a.channel">Downloading All Files in a Channel</a></h3>
<div class="paragraph">
<p>To download all the files in a channel to disk, create a directory and issue the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>mgrcfg-manager download-channel channel-label --topdir .</pre>
</div>
</div>
<div class="paragraph">
<p>The output resembles the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Copying /tmp/dest_path/example-config.txt -&gt; \
blah2/tmp/dest_path/example-config.txt</pre>
</div>
</div>
<div class="paragraph">
<p>The list of options available for mgrcfg-manager download-channel:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">-t TOPDIR, --topdir=TOPDIR</dt>
<dd>
<p>Directory to which all the file paths are relative. This option must be set.</p>
</dd>
<dt class="hdlist1">-h, --help</dt>
<dd>
<p>Show help message and exit.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="getting.the.contents.of.a.file"><a class="anchor" href="#getting.the.contents.of.a.file"></a><a class="link" href="#getting.the.contents.of.a.file">Getting the Contents of a File</a></h3>
<div class="paragraph">
<p>To direct the contents of a particular file to stdout, issue the command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>mgrcfg-manager get --channel=channel-label \
/tmp/dest_path/example-config.txt</pre>
</div>
</div>
<div class="paragraph">
<p>You should see the contents of the file as the output.</p>
</div>
</div>
<div class="sect2">
<h3 id="listing.all.files.in.a.channel"><a class="anchor" href="#listing.all.files.in.a.channel"></a><a class="link" href="#listing.all.files.in.a.channel">Listing All Files in a Channel</a></h3>
<div class="paragraph">
<p>To list all the files in a channel, issue the command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>mgrcfg-manager list channel-label</pre>
</div>
</div>
<div class="paragraph">
<p>You should see output resembling:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Files in config channel `example-channel3':
/tmp/dest_path/example-config.txt</pre>
</div>
</div>
<div class="paragraph">
<p>The list of the options available for mgrcfg-manager get:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">-c CHANNEL, --channel=CHANNEL</dt>
<dd>
<p>Get file(s) from this config channel.</p>
</dd>
<dt class="hdlist1">-t TOPDIR, --topdir=TOPDIR</dt>
<dd>
<p>Directory to which all files are relative.</p>
</dd>
<dt class="hdlist1">-r REVISION, --revision=REVISION</dt>
<dd>
<p>Get this file revision.</p>
</dd>
<dt class="hdlist1">-h, --help</dt>
<dd>
<p>Show help message and exit.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="listing.all.config.channels"><a class="anchor" href="#listing.all.config.channels"></a><a class="link" href="#listing.all.config.channels">Listing All Config Channels</a></h3>
<div class="paragraph">
<p>To list all of your organization&#8217;s configuration channels, issue the command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>mgrcfg-manager list-channels</pre>
</div>
</div>
<div class="paragraph">
<p>The output resembles the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Available config channels:
example-channel example-channel2 example-channel3 config-channel-14 config-channel-17</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title=":information_source:"></i>
</td>
<td class="content">
<div class="paragraph">
<p>This does not list <strong>local_override</strong> or <strong>server_import</strong> channels.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="removing.a.file.from.a.channel"><a class="anchor" href="#removing.a.file.from.a.channel"></a><a class="link" href="#removing.a.file.from.a.channel">Removing a File from a Channel</a></h3>
<div class="paragraph">
<p>To remove a file from a channel, issue the command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>mgrcfg-manager remove --channel=channel-label /tmp/dest_path/example-config.txt</pre>
</div>
</div>
<div class="paragraph">
<p>If prompted for your SUSE Manager username and password, provide them.</p>
</div>
<div class="paragraph">
<p>The list of the options available for mgrcfg-manager remove:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">-c CHANNEL, --channel=CHANNEL</dt>
<dd>
<p>Remove files from this config channel.</p>
</dd>
<dt class="hdlist1">-t TOPDIR, --topdir=TOPDIR</dt>
<dd>
<p>Directory to which all files are relative.</p>
</dd>
<dt class="hdlist1">-h, --help</dt>
<dd>
<p>Show help message and exit.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="deleting.a.config.channel"><a class="anchor" href="#deleting.a.config.channel"></a><a class="link" href="#deleting.a.config.channel">Deleting a Config Channel</a></h3>
<div class="paragraph">
<p>To remove a config channel in your organization, issue the command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>mgrcfg-manager remove-channel channel-label</pre>
</div>
</div>
<div class="paragraph">
<p>The output resembles the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Removing config channel example-channel
Config channel example-channel removed</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="determine.the.number.of.file.revisions"><a class="anchor" href="#determine.the.number.of.file.revisions"></a><a class="link" href="#determine.the.number.of.file.revisions">Determining the Number of File Revisions</a></h3>
<div class="paragraph">
<p>To find out how many revisions (from <strong>1 to N</strong> where N is an integer greater than 0) of a file/path are in a channel, issue the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>mgrcfg-manager revisions channel-label /tmp/dest_path/example-config.txt</pre>
</div>
</div>
<div class="paragraph">
<p>The output resembles the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Analyzing files in config channel example-channel \
/tmp/dest_path/example-config.txt: 1</pre>
</div>
</div>
</div>
<div class="sect2">
<h3 id="update.a.file.in.a.channel"><a class="anchor" href="#update.a.file.in.a.channel"></a><a class="link" href="#update.a.file.in.a.channel">Updating a File in a Channel</a></h3>
<div class="paragraph">
<p>To create a new revision of a file in a channel (or to add the first revision to that channel if none existed before for the given path), issue the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>mgrcfg-manager update --channel=channel-label \
--dest-file=/path/to/file.txt /local/path/to/file</pre>
</div>
</div>
<div class="paragraph">
<p>The output resembles the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Pushing to channel example-channel:
Local file example-channel /tmp/local/example-config.txt -&gt; \
remote file /tmp/dest_path/example-config.txt</pre>
</div>
</div>
<div class="paragraph">
<p>The list of the options available for mgrcfg-manager update:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">-c CHANNEL, --channel=CHANNEL</dt>
<dd>
<p>Upload files in this config channel.</p>
</dd>
<dt class="hdlist1">-d DEST_FILE, --dest-file=DEST_FILE</dt>
<dd>
<p>Upload the file to this path.</p>
</dd>
<dt class="hdlist1">-t TOPDIR, --topdir=TOPDIR</dt>
<dd>
<p>Directory to which all files are relative.</p>
</dd>
<dt class="hdlist1">--delim-start=DELIM_START</dt>
<dd>
<p>Start delimiter for variable interpolation.</p>
</dd>
<dt class="hdlist1">--delim-end=DELIM_END</dt>
<dd>
<p>End delimiter for variable interpolation.</p>
</dd>
<dt class="hdlist1">-h, --help</dt>
<dd>
<p>Show help message and exit.</p>
</dd>
</dl>
</div>
</div>
<div class="sect2">
<h3 id="uploading.multiple.files.at.once"><a class="anchor" href="#uploading.multiple.files.at.once"></a><a class="link" href="#uploading.multiple.files.at.once">Uploading Multiple Files at Once</a></h3>
<div class="paragraph">
<p>To upload multiple files to a config channel from a local disk at once, issue the command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>mgrcfg-manager upload-channel --topdir=topdir channel-label</pre>
</div>
</div>
<div class="paragraph">
<p>The output resembles the following:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>Using config channel example-channel4
Uploading /tmp/ola_world.txt from blah4/tmp/ola_world.txt</pre>
</div>
</div>
<div class="paragraph">
<p>The list of the options available for mgrcfg-manager upload-channel:</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">-t TOPDIR, --topdir=TOPDIR</dt>
<dd>
<p>Directory all the file paths are relative to.</p>
</dd>
<dt class="hdlist1">-c CHANNEL, --channel=CHANNEL</dt>
<dd>
<p>List of channels the config info will be uploaded into channels delimited by ','. Example: --channel=foo,bar,baz.</p>
</dd>
<dt class="hdlist1">-h, --help</dt>
<dd>
<p>Show help message and exit.</p>
</dd>
</dl>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="syncing.suse.mgr.repositories.scc"><a class="anchor" href="#syncing.suse.mgr.repositories.scc"></a><a class="link" href="#syncing.suse.mgr.repositories.scc">Syncing SUSE Manager Repositories from SCC (mgr-sync)</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p><code class="command">mgr-sync</code> should be used if SUSE Manager is connected to SUSE Customer Center (SCC).
With <code class="command">mgr-sync</code> you may add or synchronize products and channels.
The <code class="command">mgr-sync</code> command also enables and refreshes SCC data.</p>
</div>
<div class="paragraph">
<p>This tool requires that SCC is enabled by running <code class="command">mgr-sync enable-scc</code> first (Enabled by default in  2.1 and greater).</p>
</div>
<div class="paragraph">
<p>By default, log rotation of <code class="path">spacewalk-repo-sync</code> is disabled.
This logfile is run by a cron job, and managed by a configuration file.
You can enable log rotation by editing the configuration file at <code class="path">etc/sysconfig/rhn/reposync</code> and setting the <code class="command">MAX_DAYS</code> parameter.
This will permit the deletion of files that are older than the specified period of time.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title=":heavy_exclamation_mark:"></i>
</td>
<td class="content">
<div class="title">Admin credentials</div>
<div class="paragraph">
<p><code class="command">mgr-sync</code> now requires the username/password of a <strong>SUSE Manager administrator</strong>.
Most functions are available as part of the public API.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>mgr-sync provides a command structure with sub-commands similar to git or osc.
For a complete list of command line option, see the mgr-sync manpage (man mgr-sync).
Basic actions are:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>mgr-sync enable-scc

mgr-sync list channel(s)|product(s)|credentials
mgr-sync add  channel(s)|product(s)|credentials
mgr-sync delete  credentials

mgr-sync refresh [--refresh-channels] [--from-mirror MIRROR]</pre>
</div>
</div>
<div class="paragraph">
<p>See the following examples.</p>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">List channels</dt>
<dd>
<div class="listingblock">
<div class="content">
<pre>mgr-sync list channels</pre>
</div>
</div>
</dd>
<dt class="hdlist1">Add a channel</dt>
<dd>
<div class="listingblock">
<div class="content">
<pre>mgr-sync add channel LABEL</pre>
</div>
</div>
</dd>
<dt class="hdlist1">List products</dt>
<dd>
<div class="listingblock">
<div class="content">
<pre>mgr-sync list products</pre>
</div>
</div>
</dd>
<dt class="hdlist1">Add a product</dt>
<dd>
<div class="listingblock">
<div class="content">
<pre>mgr-sync add product</pre>
</div>
</div>
</dd>
<dt class="hdlist1">Refresh the data</dt>
<dd>
<div class="listingblock">
<div class="content">
<pre>mgr-sync refresh</pre>
</div>
</div>
</dd>
<dt class="hdlist1">Refresh data and schedule a reposync for all installed vendor channels</dt>
<dd>
<div class="listingblock">
<div class="content">
<pre>mgr-sync refresh --refresh-channels</pre>
</div>
</div>
</dd>
<dt class="hdlist1">List SCC credentials</dt>
<dd>
<div class="listingblock">
<div class="content">
<pre>mgr-sync list credentials</pre>
</div>
</div>
</dd>
<dt class="hdlist1">Add new SCC credentials</dt>
<dd>
<div class="listingblock">
<div class="content">
<pre>mgr-sync add credentials</pre>
</div>
</div>
</dd>
</dl>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title=":bulb:"></i>
</td>
<td class="content">
<div class="title">Credentials</div>
<div class="paragraph">
<p>There can be one primary credential only.
This is username/password used first when retrieving the list of available channels and packages.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="dlist">
<dl>
<dt class="hdlist1">Add SCC primary credentials</dt>
<dd>
<div class="listingblock">
<div class="content">
<pre>mgr-sync add credentials --primary</pre>
</div>
</div>
</dd>
<dt class="hdlist1">Delete SCC credentials</dt>
<dd>
<div class="listingblock">
<div class="content">
<pre>mgr-sync delete credentials</pre>
</div>
</div>
</dd>
</dl>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configure.suse.manager.database.smdba"><a class="anchor" href="#configure.suse.manager.database.smdba"></a><a class="link" href="#configure.suse.manager.database.smdba">Configuring SUSE Manager&#8217;s Database (smdba)</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>SUSE Manager provides the smdba command for managing the installed database.
It is the successor of <code class="package">db-control</code>, which is now <strong>unsupported</strong>.</p>
</div>
<div class="paragraph">
<p>The smdba command works on local databases only, not remote.
This utility allows you to do several administrative tasks like backing up and restoring the database.
It also allows you to create, verify, restore backups, obtaining database status, and restart the database if necessary.
The smdba command supports <strong>PostgreSQL</strong>.</p>
</div>
<div class="paragraph">
<p>Find basic information about <strong>smdba</strong> in the <strong>smdba manpage</strong>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title=":information_source:"></i>
</td>
<td class="content">
<div class="title">Restart Spacewalk Services When Connection is Lost</div>
<div class="paragraph">
<p>If you have stopped or restarted the database, Spacewalk services can lose their connections. In such a case, run the following command:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>spacewalk-service restart</pre>
</div>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="smdba.control.options"><a class="anchor" href="#smdba.control.options"></a><a class="link" href="#smdba.control.options">Control Options</a></h3>
<div class="paragraph">
<p>Depending on the database installed, smdba provides several subcommands:</p>
</div>
<div class="listingblock">
<div class="content">
<pre>backup-hot      Enable continuous archiving backup
backup-restore  Restore the SUSE Manager Database from backup.
backup-status   Show backup status.
db-start        Start the SUSE Manager Database.
db-status       Show database status.
db-stop         Stop the SUSE Manager Database.
space-overview  Show database space report.
space-reclaim   Free disk space from unused object in tables and indexes.
space-tables    Show space report for each table.
system-check    Common backend healthcheck.</pre>
</div>
</div>
<div class="paragraph">
<p>For a list of available commands on your particular appliance, call smdba help.
To display the help message for a specific subcommand, call <code class="command">smdba COMMAND help</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="starting.and.stopping.the.database"><a class="anchor" href="#starting.and.stopping.the.database"></a><a class="link" href="#starting.and.stopping.the.database">Starting and Stopping the Database</a></h3>
<div class="paragraph">
<p>There are three commands to start, stop, or get the status of the database.
Use the following commands:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># smdba db-status
Checking database core...       online
# smdba db-stop
Stopping the SUSE Manager database...
Stopping listener:     done
Stopping core:         done
# smdba db-status
Checking database core...       offline
# smdba db-start
Starting listener:     done
Starting core...       done</pre>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="at.clitools.createbootstraprepo"><a class="anchor" href="#at.clitools.createbootstraprepo"></a><a class="link" href="#at.clitools.createbootstraprepo">Creating a Bootstrap Repository (mgr-create-bootstrap-repo)</a></h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code class="code">mgr-create-bootstrap-repo</code> command is used on the  Server to create a new bootstrap repository.</p>
</div>
<div class="paragraph">
<p>Use the <code class="code">-l</code> option to list all available repositories:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># mgr-create-bootstrap-repo -l</pre>
</div>
</div>
<div class="paragraph">
<p>You can then invoke the command with the appropriate repository name to create the bootstrap repository you require, for example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># mgr-create-bootstrap-repo SLE-version-x86_64</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>[[at.clitools.createbootstraprepo.customchannels]]
=== Creating a Bootstrap Repository with Custom Channels</pre>
</div>
</div>
<div class="literalblock">
<div class="content">
<pre>Custom channels are channels that have been created to manage any custom packages that an organization might require.
To create a new bootstrap repository from a custom channel, use the [code]``mgr-create-bootstrap-repo`` command with the [code]``with-custom-channels`` option:</pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre># mgr-create-bootstrap-repo --with-custom-channels</pre>
</div>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title=":information_source:"></i>
</td>
<td class="content">
<div class="title">Flushing a Bootstrap Repository to Remove Custom Channels</div>
<div class="paragraph">
<p>If you create a bootstrap repository that contains custom channels, and later attempt to rebuild with the <code class="code">mgr-create-bootstrap-repo</code> command, the custom channel information will remain in the bootstrap repository.
If you want to remove custom channel information from your bootstrap repository, you will need to use the <code class="code">flush</code> option when you rebuild:</p>
</div>
<div class="listingblock">
<div class="content">
<pre># mgr-create-bootstrap-repo --flush</pre>
</div>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
</article>
  </main>
</div>
<footer class="footer">
  <p>Copyright (C) 2017-2018 <a href="https://jcayouette.github.io/personal-blog">Belief and Reason</a></p>
  <p>Except where otherwise noted, jcayouette.github.io/personal-blog, BoR, are licensed under the <a href="https://www.mozilla.org/en-US/MPL/2.0/">Mozilla Public License Version 2.0</a> (MPL-2.0).</p>
</footer>
<script src="https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js"></script>
<!-- fetched from https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.js -->
<script>
function focusSearchInput () { document.querySelector('#search-input').focus() }
var search = docsearch({
  appId: '#',
  apiKey: '#',
  indexName: '#',
  inputSelector: '#search-input',
  autocompleteOptions: { hint: false, keyboardShortcuts: ['s'] },
  algoliaOptions: { hitsPerPage: 10 }
}).autocomplete
search.on('autocomplete:closed', function () { search.autocomplete.setVal() })
focusSearchInput()
window.addEventListener('load', focusSearchInput)
</script>
<script src="../../_/js/site.js"></script>
<script src="../../_/js/vendor/highlight.js"></script>
<script>hljs.initHighlighting()</script>
  </body>
</html>
